# Настройка Supabase для бэкенда

## Необходимые переменные окружения

Создайте файл `.env` в корне директории `backend` со следующими переменными:

```
PORT=3001
SUPABASE_URL=your_supabase_url
SUPABASE_SERVICE_KEY=your_supabase_service_key
FRONTEND_URL=http://localhost:3000
```

## Как получить ключи Supabase

1. Войдите в свой аккаунт Supabase
2. Перейдите в настройки проекта (Project Settings)
3. В разделе API найдите URL проекта (Project URL) - это значение для `SUPABASE_URL`
4. В том же разделе найдите service_role key - это значение для `SUPABASE_SERVICE_KEY`

## Важно!

- **Никогда не публикуйте** файл `.env` в репозитории
- Service key имеет полный доступ к базе данных в обход RLS (Row Level Security), поэтому его нужно хранить только на сервере
- Используйте service key только на бэкенде, никогда не используйте его на фронтенде

## Миграция с фронтенда на бэкенд

При переносе логики с фронтенда на бэкенд:

1. Создайте соответствующие API эндпоинты в бэкенде
2. Обновите фронтенд для использования этих эндпоинтов вместо прямого обращения к Supabase
3. Используйте JWT токены для аутентификации между фронтендом и бэкендом

## Структура API

### Аутентификация

- `POST /auth/login` - вход в систему
- `POST /auth/register` - регистрация
- `POST /auth/reset-password` - запрос на сброс пароля
- `POST /auth/update-password` - обновление пароля
- `POST /auth/logout` - выход из системы

### Пользователи

- `GET /users/:id/profile` - получение профиля пользователя
- `PUT /users/:id/profile` - обновление профиля пользователя
- `POST /users/register` - регистрация пользователя (альтернативный путь)
- `DELETE /users/:id` - удаление пользователя 